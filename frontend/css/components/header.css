/* ==========================================================================
   HEADER - Main site header and navigation
   ========================================================================== */

@layer components {
  /* Header wrapper and sticky behavior */
  .header-wrapper {
    @apply relative z-[3];
  }

  .header-wrapper--border-bottom {
    @apply border-b border-foreground/10;
  }

  /* Sticky header states */
  .shopify-section-header-sticky {
    @apply sticky top-0;
  }

  .shopify-section-header-hidden {
    @apply -translate-y-full;
  }

  .section-header.animate {
    @apply transition-transform duration-300 ease-out;
  }

  /* Main header container */
  .header {
    @apply flex items-center gap-4 relative;
  }

  /* Header layouts */
  .header--top-left,
  .header--middle-left {
    @apply grid grid-cols-[auto_1fr_auto];
  }

  .header--top-center {
    @apply grid grid-cols-[1fr_auto_1fr];
  }

  .header--middle-center {
    @apply grid grid-cols-[1fr_auto_1fr];
  }

  /* Mobile logo positioning */
  @media (max-width: 989px) {
    .header--mobile-center {
      @apply justify-items-center;
    }

    .header--mobile-center .header__heading {
      @apply justify-self-center;
    }

    .header--mobile-left .header__heading {
      @apply order-first;
    }
  }

  /* Header heading/logo */
  .header__heading {
    @apply m-0 leading-none;
  }

  .header__heading-link {
    @apply no-underline inline-flex items-center;
  }

  .header__heading-logo-wrapper {
    @apply transition-all duration-300;
  }

  .header__heading-logo {
    @apply max-w-full h-auto;
  }

  /* Scrolled state - reduce logo size */
  .scrolled-past-header .header__heading-logo-wrapper {
    @apply w-3/4;
  }

  /* Header icons container */
  .header__icons {
    @apply flex items-center gap-2 justify-end;
  }

  .header__icons--localization {
    @apply gap-0;
  }

  /* Individual header icons */
  .header__icon {
    @apply relative flex items-center justify-center p-2 no-underline cursor-pointer;
    @apply text-current hover:opacity-80 transition-opacity duration-200;
  }

  .header__icon--menu {
    @apply lg:hidden;
  }

  .header__icon--summary {
    @apply list-none;
  }

  .header__icon--summary::-webkit-details-marker {
    @apply hidden;
  }

  .header__icon i {
    @apply text-xl;
  }

  /* Cart icon with bubble */
  .header__icon--cart {
    @apply relative;
  }

  .cart-count-bubble {
    @apply absolute -top-1 -right-1 flex items-center justify-center;
    @apply min-w-[1.25rem] h-5 px-1.5 rounded-full;
    @apply bg-foreground text-background text-xs font-medium;
  }

  /* Desktop localization wrapper */
  .desktop-localization-wrapper {
    @apply hidden lg:flex items-center gap-2;
  }

  /* Has menu classes */
  .header--has-menu.drawer-menu .header__icon--menu {
    @apply flex;
  }

  @media (min-width: 990px) {
    .header--has-menu:not(.drawer-menu) header-drawer {
      @apply hidden;
    }
  }

  /* List menu - dropdown navigation */
  .list-menu {
    @apply list-none m-0 p-0;
  }

  .list-menu--inline {
    @apply inline-flex flex-wrap gap-6;
  }

  .list-menu__item {
    @apply flex items-center relative;
    line-height: calc(1 + 0.3 / var(--font-body-scale, 1));
  }

  .list-menu__item--link {
    @apply no-underline py-2 lg:py-1;
    line-height: calc(1 + 0.8 / var(--font-body-scale, 1));
  }

  summary.list-menu__item {
    @apply pr-7;
  }

  /* Dropdown disclosure menu */
  .list-menu--disclosure {
    @apply absolute min-w-full w-80 top-full left-0;
    @apply bg-background border border-foreground/20 rounded shadow-lg;
    @apply opacity-0 invisible translate-y-2;
    @apply transition-all duration-200 ease-out;
  }

  details[open] > .list-menu--disclosure {
    @apply opacity-100 visible translate-y-0;
  }

  .list-menu--disclosure.list-menu--right {
    @apply left-auto right-0;
  }

  /* Localization selector */
  .list-menu--disclosure.localization-selector {
    @apply max-h-72 overflow-auto w-40 p-2;
  }

  .list-menu__item--active {
    @apply underline underline-offset-[0.3rem];
  }

  .list-menu__item--active:hover {
    @apply decoration-2;
  }

  /* Search component */
  .search__input.field__input {
    @apply pr-24;
  }

  .search__button,
  .reset__button {
    @apply absolute top-px bg-transparent;
    @apply flex items-center justify-center p-3;
    @apply hover:opacity-80 transition-opacity;
    right: var(--inputs-border-width, 1px);
  }

  .reset__button {
    @apply right-11;
  }

  .reset__button:not(:focus-visible)::after {
    @apply absolute right-0 h-[calc(100%-1rem)] border-r border-foreground/10;
    content: '';
  }

  .search__button:focus-visible,
  .reset__button:focus-visible {
    @apply bg-background z-[4];
  }

  .search__button i,
  .reset__button i {
    @apply text-lg transition-transform;
  }

  .search__button:hover i,
  .reset__button:hover i {
    @apply scale-110;
  }

  /* Search decoration removal */
  input::-webkit-search-decoration {
    -webkit-appearance: none;
  }

  .template-search__results {
    @apply relative;
  }

  /* Header drawer toggle icons */
  header-drawer {
    @apply justify-self-start -ml-3;
  }

  header-drawer .header__icon span {
    @apply relative flex items-center justify-center;
  }

  /* Icon states for menu toggle */
  header-drawer .header__icon [class*="ph-list"] {
    @apply block;
  }

  header-drawer .header__icon [class*="ph-x"] {
    @apply hidden absolute inset-0;
  }

  header-drawer details[open] .header__icon [class*="ph-list"] {
    @apply hidden;
  }

  header-drawer details[open] .header__icon [class*="ph-x"] {
    @apply flex items-center justify-center;
  }
}
