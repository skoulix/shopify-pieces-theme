/* ==========================================================================
   CARDS - Product, Collection, Article cards
   ========================================================================== */

@layer components {
  /* Card Wrapper */
  .card-wrapper {
    color: inherit;
    height: 100%;
    position: relative;
    text-decoration: none;
  }

  .card {
    text-decoration: none;
    text-align: var(--text-alignment);
  }

  .card:not(.ratio) {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .card--card,
  .card--standard .card__inner {
    position: relative;
    box-sizing: border-box;
    border-radius: var(--border-radius);
    border: var(--border-width) solid rgba(var(--color-foreground), var(--border-opacity));
  }

  .card--card:after,
  .card--standard .card__inner:after {
    content: '';
    position: absolute;
    z-index: -1;
    width: calc(var(--border-width) * 2 + 100%);
    height: calc(var(--border-width) * 2 + 100%);
    top: calc(var(--border-width) * -1);
    left: calc(var(--border-width) * -1);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-horizontal-offset) var(--shadow-vertical-offset) var(--shadow-blur-radius)
      rgba(var(--color-shadow), var(--shadow-opacity));
  }

  .card .card__inner .card__media {
    overflow: hidden;
    z-index: 0;
    border-radius: calc(var(--border-radius) - var(--border-width) - var(--image-padding));
  }

  .card__media,
  .card .media {
    bottom: 0;
    position: absolute;
    top: 0;
  }

  .card .media {
    width: 100%;
  }

  .card__media {
    margin: var(--image-padding);
    width: calc(100% - 2 * var(--image-padding));
  }

  .card__inner {
    width: 100%;
  }

  .card__content {
    display: grid;
    grid-template-rows: minmax(0, 1fr) max-content minmax(0, 1fr);
    padding: 1rem;
    width: 100%;
    flex-grow: 1;
  }

  .card__information {
    grid-row-start: 2;
    padding: 1.3rem 1rem;
  }

  @media (min-width: 750px) {
    .card__information {
      padding-bottom: 1.7rem;
      padding-top: 1.7rem;
    }
  }

  .card__heading {
    margin-top: 0;
    margin-bottom: 0;
  }

  .card__heading a::after {
    bottom: 0;
    content: '';
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    z-index: 1;
  }

  .card__media .media img {
    height: 100%;
    object-fit: cover;
    object-position: center center;
    width: 100%;
  }

  .card-information {
    text-align: var(--text-alignment);
    width: 100%;
  }

  .card-information > * {
    line-height: calc(1 + 0.4 / var(--font-body-scale));
    color: rgb(var(--color-foreground));
  }

  .card-information > * + * {
    margin-top: 0.5rem;
  }

  .card-information > *:not(.visually-hidden:first-child) + *:not(.rating):not(.card__information-volume-pricing-note) {
    margin-top: 0.7rem;
  }

  /* Card hover effects */
  @media (min-width: 990px) {
    .card .media.media--hover-effect > img:only-child,
    .card-wrapper .media.media--hover-effect > img:only-child {
      transition: transform var(--duration-long) ease;
    }

    .card:hover .media.media--hover-effect > img:first-child:only-child,
    .card-wrapper:hover .media.media--hover-effect > img:first-child:only-child {
      transform: scale(1.03);
    }

    .card-wrapper:hover .media.media--hover-effect > img:first-child:not(:only-child) {
      opacity: 0;
    }

    .card-wrapper:hover .media.media--hover-effect > img + img {
      opacity: 1;
      transition: transform var(--duration-long) ease;
      transform: scale(1.03);
    }

    .underline-links-hover:hover a {
      text-decoration: underline;
      text-underline-offset: 0.3rem;
    }
  }

  /* Tailwind card classes */
  .card-media {
    @apply relative overflow-hidden;
    margin: var(--product-card-image-padding);
    border-radius: calc(var(--product-card-corner-radius) - var(--product-card-border-width) - var(--product-card-image-padding));
  }

  .card-media img {
    @apply w-full h-full object-cover object-center
           transition-transform duration-500 ease-out-expo;
  }

  .card-wrapper:hover .card-media img {
    @apply scale-[1.03];
  }

  .card-content {
    @apply flex-1 p-4;
  }

  @media (min-width: 750px) {
    .card-content { @apply py-6; }
  }

  .card-title {
    @apply font-heading text-foreground m-0 leading-tight;
  }

  .card-title a {
    @apply text-inherit no-underline;
  }

  .card-title a::after {
    @apply content-[''] absolute inset-0 z-10;
  }
}
