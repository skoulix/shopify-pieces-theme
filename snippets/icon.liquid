{% comment %}
  Renders a Phosphor icon.

  Usage:
  {% render 'icon', name: 'cart' %}
  {% render 'icon', name: 'cart', weight: 'bold' %}
  {% render 'icon', name: 'user', class: 'w-6 h-6' %}
  {% render 'icon', name: 'arrow-right', size: '24' %}

  Parameters:
  - name: The icon name (uses Phosphor naming convention)
  - weight: 'regular' (default), 'bold', 'light', 'thin', 'fill', 'duotone'
  - class: Additional CSS classes
  - size: Size in pixels (optional, defaults to 20)
  - aria_label: Accessible label for the icon
{% endcomment %}

{%- liquid
  assign icon_weight = weight | default: 'regular'
  assign icon_size = size | default: '20'
  assign extra_class = class | default: ''

  # Map common Dawn/Shopify icon names to Phosphor equivalents
  case name
    when 'cart'
      assign phosphor_name = 'shopping-bag'
    when 'cart-empty'
      assign phosphor_name = 'shopping-bag'
    when 'account', 'user'
      assign phosphor_name = 'user'
    when 'search'
      assign phosphor_name = 'magnifying-glass'
    when 'close'
      assign phosphor_name = 'x'
    when 'hamburger', 'menu'
      assign phosphor_name = 'list'
    when 'arrow', 'arrow-right'
      assign phosphor_name = 'arrow-right'
    when 'arrow-left'
      assign phosphor_name = 'arrow-left'
    when 'caret', 'caret-down', 'chevron-down'
      assign phosphor_name = 'caret-down'
    when 'caret-up', 'chevron-up'
      assign phosphor_name = 'caret-up'
    when 'caret-right', 'chevron-right'
      assign phosphor_name = 'caret-right'
    when 'caret-left', 'chevron-left'
      assign phosphor_name = 'caret-left'
    when 'plus'
      assign phosphor_name = 'plus'
    when 'minus'
      assign phosphor_name = 'minus'
    when 'check', 'checkmark'
      assign phosphor_name = 'check'
    when 'share'
      assign phosphor_name = 'share-network'
    when 'heart', 'wishlist'
      assign phosphor_name = 'heart'
    when 'star'
      assign phosphor_name = 'star'
    when 'filter'
      assign phosphor_name = 'funnel'
    when 'sort'
      assign phosphor_name = 'arrows-down-up'
    when 'grid'
      assign phosphor_name = 'squares-four'
    when 'list'
      assign phosphor_name = 'rows'
    when 'trash', 'remove'
      assign phosphor_name = 'trash'
    when 'edit', 'pencil'
      assign phosphor_name = 'pencil-simple'
    when 'lock'
      assign phosphor_name = 'lock-simple'
    when 'unlock'
      assign phosphor_name = 'lock-simple-open'
    when 'eye'
      assign phosphor_name = 'eye'
    when 'eye-off'
      assign phosphor_name = 'eye-slash'
    when 'info'
      assign phosphor_name = 'info'
    when 'question'
      assign phosphor_name = 'question'
    when 'warning'
      assign phosphor_name = 'warning'
    when 'error'
      assign phosphor_name = 'x-circle'
    when 'success'
      assign phosphor_name = 'check-circle'
    when 'play'
      assign phosphor_name = 'play'
    when 'pause'
      assign phosphor_name = 'pause'
    when 'zoom-in'
      assign phosphor_name = 'magnifying-glass-plus'
    when 'zoom-out'
      assign phosphor_name = 'magnifying-glass-minus'
    when 'facebook'
      assign phosphor_name = 'facebook-logo'
    when 'instagram'
      assign phosphor_name = 'instagram-logo'
    when 'twitter', 'x-twitter'
      assign phosphor_name = 'x-logo'
    when 'youtube'
      assign phosphor_name = 'youtube-logo'
    when 'tiktok'
      assign phosphor_name = 'tiktok-logo'
    when 'pinterest'
      assign phosphor_name = 'pinterest-logo'
    when 'linkedin'
      assign phosphor_name = 'linkedin-logo'
    when 'snapchat'
      assign phosphor_name = 'snapchat-logo'
    when 'vimeo'
      assign phosphor_name = 'vimeo-logo'
    when 'tumblr'
      assign phosphor_name = 'tumblr-logo'
    when 'email', 'mail'
      assign phosphor_name = 'envelope-simple'
    when 'phone'
      assign phosphor_name = 'phone'
    when 'location', 'pin'
      assign phosphor_name = 'map-pin'
    when 'clock', 'time'
      assign phosphor_name = 'clock'
    when 'calendar'
      assign phosphor_name = 'calendar-blank'
    when 'box', 'package'
      assign phosphor_name = 'package'
    when 'truck', 'shipping'
      assign phosphor_name = 'truck'
    when 'return'
      assign phosphor_name = 'arrow-u-up-left'
    when 'gift'
      assign phosphor_name = 'gift'
    when 'credit-card', 'payment'
      assign phosphor_name = 'credit-card'
    when 'secure', 'shield'
      assign phosphor_name = 'shield-check'
    when 'globe', 'world'
      assign phosphor_name = 'globe'
    when 'spinner', 'loading'
      assign phosphor_name = 'circle-notch'
    else
      assign phosphor_name = name
  endcase

  # Build class string
  assign base_class = 'ph'
  if icon_weight == 'bold'
    assign base_class = 'ph-bold'
  elsif icon_weight == 'light'
    assign base_class = 'ph-light'
  elsif icon_weight == 'thin'
    assign base_class = 'ph-thin'
  elsif icon_weight == 'fill'
    assign base_class = 'ph-fill'
  elsif icon_weight == 'duotone'
    assign base_class = 'ph-duotone'
  endif

  assign icon_class = base_class | append: ' ph-' | append: phosphor_name
  if extra_class != blank
    assign icon_class = icon_class | append: ' ' | append: extra_class
  endif
-%}

<i
  class="{{ icon_class }}"
  style="font-size: {{ icon_size }}px;"
  {%- if aria_label %} aria-label="{{ aria_label }}"{% else %} aria-hidden="true"{% endif %}
></i>
