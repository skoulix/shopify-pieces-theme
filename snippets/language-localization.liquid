{%- comment -%}
  Renders the language picker for the localization form - Tailwind Version

  Accepts:
    - localPosition: pass in the position in which the form is coming up to create specific IDs
{%- endcomment -%}

<div class="disclosure relative">
  <button
    type="button"
    class="disclosure__button flex items-center gap-1.5 text-sm text-current hover:opacity-70 transition-opacity"
    aria-expanded="false"
    aria-controls="{{ localPosition }}List"
    aria-describedby="{{ localPosition }}Label"
  >
    <span>{{ localization.language.endonym_name | capitalize }}</span>
    {%- render 'icon', name: 'caret-down', size: '16' -%}
  </button>

  <div class="disclosure__list-wrapper language-selector absolute bottom-full mb-2 right-0 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[160px] overflow-hidden z-50" hidden>
    <ul id="{{ localPosition }}List" role="list" class="disclosure__list p-2 space-y-0.5">
      {%- for language in localization.available_languages -%}
        <li class="disclosure__item" tabindex="-1">
          <a
            class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-neutral-700 hover:bg-neutral-100 transition-colors{% if language.iso_code == localization.language.iso_code %} bg-neutral-100 font-medium{% endif %}"
            href="#"
            hreflang="{{ language.iso_code }}"
            lang="{{ language.iso_code }}"
            {% if language.iso_code == localization.language.iso_code %}aria-current="true"{% endif %}
            data-value="{{ language.iso_code }}"
          >
            <span class="w-4 flex-shrink-0 {% if language.iso_code != localization.language.iso_code %}invisible{% endif %}">
              {%- render 'icon', name: 'check', size: '16' -%}
            </span>
            <span>{{ language.endonym_name | capitalize }}</span>
          </a>
        </li>
      {%- endfor -%}
    </ul>
  </div>
</div>
<input type="hidden" name="locale_code" value="{{ localization.language.iso_code }}">
