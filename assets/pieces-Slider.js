import{P as i}from"./pieces-Piece.js";import"./pieces-app.js";class r extends i{constructor(){super("Slider",{stylesheets:[]}),this.currentPage=1,this.totalPages=1,this.sliderItemOffset=0,this.slidesPerPage=1}mount(){this.$slider=this.$("[data-slider-track]")[0]||this.$('[id^="Slider-"]')[0],this.$items=this.$$("[data-slider-item]").length?this.$$("[data-slider-item]"):this.$$('[id^="Slide-"]'),this.$prevButton=this.$("[data-slider-prev]")[0]||this.$('button[name="previous"]')[0],this.$nextButton=this.$("[data-slider-next]")[0]||this.$('button[name="next"]')[0],this.$currentPage=this.$("[data-slider-current]")[0]||this.$(".slider-counter--current")[0],this.$totalPages=this.$("[data-slider-total]")[0]||this.$(".slider-counter--total")[0],!(!this.$slider||!this.$items.length)&&(this.enableLooping=this.hasAttribute("data-loop"),this.initPages(),this.resizeObserver=new ResizeObserver(()=>this.initPages()),this.resizeObserver.observe(this.$slider),this.on("scroll",this.$slider,this.update),this.$prevButton&&this.on("click",this.$prevButton,this.onPrevClick),this.$nextButton&&this.on("click",this.$nextButton,this.onNextClick))}unmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.off("scroll",this.$slider,this.update),this.$prevButton&&this.off("click",this.$prevButton,this.onPrevClick),this.$nextButton&&this.off("click",this.$nextButton,this.onNextClick)}initPages(){this.visibleItems=Array.from(this.$items).filter(t=>t.clientWidth>0),!(this.visibleItems.length<2)&&(this.sliderItemOffset=this.visibleItems[1].offsetLeft-this.visibleItems[0].offsetLeft,this.slidesPerPage=Math.floor((this.$slider.clientWidth-this.visibleItems[0].offsetLeft)/this.sliderItemOffset),this.totalPages=this.visibleItems.length-this.slidesPerPage+1,this.update())}update(){if(!this.$slider)return;const t=this.currentPage;this.currentPage=Math.round(this.$slider.scrollLeft/this.sliderItemOffset)+1,this.$currentPage&&(this.$currentPage.textContent=this.currentPage),this.$totalPages&&(this.$totalPages.textContent=this.totalPages),this.currentPage!==t&&this.emit("slideChanged",this,{detail:{currentPage:this.currentPage,currentElement:this.visibleItems[this.currentPage-1]}}),this.enableLooping||this.updateButtonStates()}updateButtonStates(){const t=this.isSlideVisible(this.visibleItems[0])&&this.$slider.scrollLeft===0,s=this.isSlideVisible(this.visibleItems[this.visibleItems.length-1]);this.$prevButton&&(this.$prevButton.disabled=t,this.$prevButton.classList.toggle("opacity-50",t)),this.$nextButton&&(this.$nextButton.disabled=s,this.$nextButton.classList.toggle("opacity-50",s))}isSlideVisible(t,s=0){const e=this.$slider.clientWidth+this.$slider.scrollLeft-s;return t.offsetLeft+t.clientWidth<=e&&t.offsetLeft>=this.$slider.scrollLeft}onPrevClick(t){t.preventDefault();const s=parseInt(t.currentTarget.dataset.step)||1;this.scrollTo(this.$slider.scrollLeft-s*this.sliderItemOffset)}onNextClick(t){t.preventDefault();const s=parseInt(t.currentTarget.dataset.step)||1;this.scrollTo(this.$slider.scrollLeft+s*this.sliderItemOffset)}scrollTo(t){this.$slider.scrollTo({left:t,behavior:"smooth"})}goToSlide(t){const s=(t-1)*this.sliderItemOffset;this.scrollTo(s)}}customElements.define("c-slider",r);export{r as default};
//# sourceMappingURL=pieces-Slider.js.map
