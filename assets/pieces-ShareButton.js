class e extends HTMLElement{constructor(){super(),this.boundNativeShare=this.nativeShare.bind(this),this.boundOnToggle=this.onToggle.bind(this),this.boundCopyToClipboard=this.copyToClipboard.bind(this),this.boundClose=this.close.bind(this)}connectedCallback(){var t;this.$shareButton=this.querySelector("button"),this.$summary=this.querySelector("summary"),this.$details=this.querySelector("details"),this.$closeButton=this.querySelector(".share-button__close"),this.$successMessage=this.querySelector('[id^="ShareMessage"]'),this.$urlInput=this.querySelector("input"),this.$copyButton=this.querySelector(".share-button__copy"),this.urlToShare=((t=this.$urlInput)==null?void 0:t.value)||window.location.href,navigator.share?(this.$details&&this.$details.setAttribute("hidden",""),this.$shareButton&&(this.$shareButton.classList.remove("hidden"),this.$shareButton.addEventListener("click",this.boundNativeShare))):(this.$details&&this.$details.addEventListener("toggle",this.boundOnToggle),this.$copyButton&&this.$copyButton.addEventListener("click",this.boundCopyToClipboard),this.$closeButton&&this.$closeButton.addEventListener("click",this.boundClose))}disconnectedCallback(){navigator.share?this.$shareButton&&this.$shareButton.removeEventListener("click",this.boundNativeShare):(this.$details&&this.$details.removeEventListener("toggle",this.boundOnToggle),this.$copyButton&&this.$copyButton.removeEventListener("click",this.boundCopyToClipboard),this.$closeButton&&this.$closeButton.removeEventListener("click",this.boundClose))}nativeShare(){navigator.share({url:this.urlToShare,title:document.title})}onToggle(){var t,s;(t=this.$details)!=null&&t.open||(this.$successMessage&&(this.$successMessage.classList.add("hidden"),this.$successMessage.textContent=""),this.$closeButton&&this.$closeButton.classList.add("hidden"),(s=this.$summary)==null||s.focus())}copyToClipboard(){this.$urlInput&&navigator.clipboard.writeText(this.$urlInput.value).then(()=>{var t;this.$successMessage&&(this.$successMessage.classList.remove("hidden"),this.$successMessage.textContent=((t=window.accessibilityStrings)==null?void 0:t.shareSuccess)||"Link copied!"),this.$closeButton&&(this.$closeButton.classList.remove("hidden"),this.$closeButton.focus())})}close(){this.$details&&(this.$details.open=!1),this.onToggle()}updateUrl(t){this.urlToShare=t,this.$urlInput&&(this.$urlInput.value=t)}}customElements.define("share-button",e);export{e as default};
//# sourceMappingURL=pieces-ShareButton.js.map
