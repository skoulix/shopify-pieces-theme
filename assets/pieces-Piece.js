import{p as s}from"./pieces-app.js";class a extends HTMLElement{constructor(){super(),this.name="Piece",this.template=document.createElement("template"),this.innerHTML!=" "&&(this.baseHTML=this.innerHTML)}connectedCallback(e=!0){e?(typeof this.cid=="string"?this.cid=this.cid:this.cid=`c${s.piecesCount++}`,s.addPiece({name:this.name,id:this.cid,piece:this})):this.removeEvents(),this.preMount(),this.template.innerHTML=this.render(),this.appendChild(this.template.cloneNode(!0).content),this.mount(),this.initEvents()}render(){if(this.baseHTML!=null)return this.baseHTML}disconnectedCallback(){this.unMount()}adoptedCallback(){this.adopted()}preMount(){this.innerHTML="",this.log&&console.log("ðŸš§ preMount",this.name),this.loadStyles()}mount(){this.log&&console.log("ðŸ”¨ mount",this.name)}update(){this.log&&console.log("ðŸ”ƒ update",this.name),this.connectedCallback(!1)}unMount(){s.removePiece({name:this.name,id:this.cid}),this.removeEvents(),this.log&&console.log("ðŸ‘‹ unMount",this.name)}attributeChangedCallback(e,t,i){t!==i&&(this[e]=i,this.update())}$(e){return this.querySelectorAll(e)}addEvent(e,t,i){t!=null&&t.addEventListener(e,i.bind(this))}removeEvent(e,t,i){t!=null&&t.removeEventListener(e,i.bind(this))}initEvents(){}removeEvents(){}call(e,t,i,c){Object.keys(s.currentPieces).forEach(n=>{n==i&&Object.keys(s.currentPieces[n]).forEach(r=>{c!=null?r==c&&s.currentPieces[n][r].piece[e](t):s.currentPieces[n][r].piece[e](t)})})}async loadStyles(){this.styles!=null&&await import(this.styles)}get log(){return typeof this.getAttribute("log")=="string"}get cid(){return this.getAttribute("cid")}set cid(e){return this.setAttribute("cid",e)}get properties(){return Object.values(this.attributes).map(e=>`${e.name}="${e.value}"`).join(" ")}}export{a as P};
//# sourceMappingURL=pieces-Piece.js.map
