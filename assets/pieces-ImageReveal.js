import{P as s}from"./pieces-Piece.js";import{g as e,S as i}from"./pieces-app.js";e.registerPlugin(i);class a extends s{constructor(){super("ImageReveal",{stylesheets:[]}),this.scrollTrigger=null}mount(){this.$image=this.$("img")[0]||this.$("video")[0],this.$overlay=this.$("[data-overlay]")[0],this.$image&&(this.direction=this.dataset.direction||"up",this.duration=parseFloat(this.dataset.duration)||1.2,this.start=this.dataset.start||"top 85%",this.setInitialState(),this.createScrollTrigger())}unmount(){this.scrollTrigger&&(this.scrollTrigger.kill(),this.scrollTrigger=null)}setInitialState(){e.set(this,{overflow:"hidden"}),e.set(this.$image,{scale:1.3,opacity:0}),this.$overlay||(this.$overlay=document.createElement("div"),this.$overlay.classList.add("image-reveal-overlay"),this.$overlay.style.cssText=`
        position: absolute;
        inset: 0;
        background: rgb(var(--color-background));
        z-index: 1;
      `,this.appendChild(this.$overlay));const t={up:{scaleY:1,transformOrigin:"bottom"},down:{scaleY:1,transformOrigin:"top"},left:{scaleX:1,transformOrigin:"right"},right:{scaleX:1,transformOrigin:"left"}};e.set(this.$overlay,t[this.direction]||t.up)}createScrollTrigger(){this.scrollTrigger=i.create({trigger:this,start:this.start,once:!0,onEnter:()=>this.animate()})}animate(){const t=e.timeline(),r={up:{scaleY:0},down:{scaleY:0},left:{scaleX:0},right:{scaleX:0}};return t.to(this.$overlay,{...r[this.direction],duration:this.duration*.7,ease:"power2.inOut"}),t.to(this.$image,{scale:1,opacity:1,duration:this.duration,ease:"power2.out"},0),t}reset(){this.scrollTrigger&&this.scrollTrigger.kill(),this.setInitialState(),this.createScrollTrigger()}}customElements.define("c-image-reveal",a);export{a as default};
//# sourceMappingURL=pieces-ImageReveal.js.map
