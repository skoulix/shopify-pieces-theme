import{P as u}from"./pieces-Piece.js";import"./pieces-app.js";class a extends u{constructor(){super("QuantityInput",{stylesheets:[]})}mount(){this.$input=this.$("input")[0],this.$buttons=this.$$("button"),this.$input&&(this.changeEvent=new Event("change",{bubbles:!0}),this.on("change",this.$input,this.onInputChange),this.$buttons.forEach(t=>{this.on("click",t,this.onButtonClick)}),this.validateQtyRules(),typeof subscribe<"u"&&typeof PUB_SUB_EVENTS<"u"&&(this.quantityUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.quantityUpdate,this.validateQtyRules.bind(this))))}unmount(){this.quantityUpdateUnsubscriber&&this.quantityUpdateUnsubscriber()}onInputChange(){this.validateQtyRules()}onButtonClick(t){t.preventDefault();const i=t.currentTarget,s=this.$input.value;if(i.name==="plus"){const n=parseInt(this.$input.dataset.min),e=parseInt(this.$input.step);n>e&&this.$input.value==0?this.$input.value=n:this.$input.stepUp()}else this.$input.stepDown();s!==this.$input.value&&this.$input.dispatchEvent(this.changeEvent),this.$input.dataset.min===s&&i.name==="minus"&&(this.$input.value=parseInt(this.$input.min))}validateQtyRules(){const t=parseInt(this.$input.value);if(this.$input.min){const i=this.$("[name='minus']")[0];i&&(i.classList.toggle("disabled",t<=parseInt(this.$input.min)),i.disabled=t<=parseInt(this.$input.min))}if(this.$input.max){const i=parseInt(this.$input.max),s=this.$("[name='plus']")[0];s&&(s.classList.toggle("disabled",t>=i),s.disabled=t>=i)}}}customElements.define("c-quantity-input",a);export{a as default};
//# sourceMappingURL=pieces-QuantityInput.js.map
