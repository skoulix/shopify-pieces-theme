{%- comment -%}
  Contact Form Section - Tailwind Version
  Simple contact form with name, email, phone, and message fields
{%- endcomment -%}

<section class="py-12 lg:py-16">
  <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
    {%- if section.settings.heading != blank -%}
      <h2 class="text-2xl lg:text-3xl font-semibold text-neutral-900 mb-8 text-center">
        {{ section.settings.heading }}
      </h2>
    {%- else -%}
      <h2 class="sr-only">{{ 'templates.contact.form.title' | t }}</h2>
    {%- endif -%}

    {%- form 'contact', id: 'ContactForm' -%}
      {%- comment -%} Success Message {%- endcomment -%}
      {%- if form.posted_successfully? -%}
        <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg" tabindex="-1" autofocus>
          <p class="flex items-center gap-2 text-green-800">
            {%- render 'icon', name: 'check-circle', size: '20' -%}
            {{ 'templates.contact.form.post_success' | t }}
          </p>
        </div>
      {%- endif -%}

      {%- comment -%} Error Message {%- endcomment -%}
      {%- if form.errors -%}
        <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg" role="alert" tabindex="-1" autofocus>
          <p class="flex items-center gap-2 text-red-800 font-medium mb-2">
            {%- render 'icon', name: 'warning', size: '20' -%}
            {{ 'templates.contact.form.error_heading' | t }}
          </p>
          <ul class="list-disc list-inside text-sm text-red-700">
            <li>
              {{ form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email }}
            </li>
          </ul>
        </div>
      {%- endif -%}

      <div class="space-y-5">
        {%- comment -%} Name and Email Row {%- endcomment -%}
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
          <div>
            <label for="ContactForm-name" class="block text-sm font-medium text-neutral-700 mb-1.5">
              {{ 'templates.contact.form.name' | t }}
            </label>
            <input
              type="text"
              id="ContactForm-name"
              name="contact[{{ 'templates.contact.form.name' | t }}]"
              autocomplete="name"
              value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
              class="w-full h-12 px-4 bg-white border border-neutral-300 rounded-lg text-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent transition-shadow"
              placeholder="{{ 'templates.contact.form.name' | t }}"
            >
          </div>

          <div>
            <label for="ContactForm-email" class="block text-sm font-medium text-neutral-700 mb-1.5">
              {{ 'templates.contact.form.email' | t }} <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              id="ContactForm-email"
              name="contact[email]"
              autocomplete="email"
              spellcheck="false"
              autocapitalize="off"
              value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
              aria-required="true"
              {% if form.errors contains 'email' %}
                aria-invalid="true"
                aria-describedby="ContactForm-email-error"
              {% endif %}
              class="w-full h-12 px-4 bg-white border {% if form.errors contains 'email' %}border-red-500{% else %}border-neutral-300{% endif %} rounded-lg text-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent transition-shadow"
              placeholder="{{ 'templates.contact.form.email' | t }}"
              required
            >
            {%- if form.errors contains 'email' -%}
              <p class="mt-1.5 text-sm text-red-600 flex items-center gap-1" id="ContactForm-email-error">
                {%- render 'icon', name: 'warning', size: '14' -%}
                {{ form.errors.translated_fields.email | capitalize }}
                {{ form.errors.messages.email }}
              </p>
            {%- endif -%}
          </div>
        </div>

        {%- comment -%} Phone {%- endcomment -%}
        <div>
          <label for="ContactForm-phone" class="block text-sm font-medium text-neutral-700 mb-1.5">
            {{ 'templates.contact.form.phone' | t }}
          </label>
          <input
            type="tel"
            id="ContactForm-phone"
            name="contact[{{ 'templates.contact.form.phone' | t }}]"
            autocomplete="tel"
            pattern="[0-9\-]*"
            value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
            class="w-full h-12 px-4 bg-white border border-neutral-300 rounded-lg text-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent transition-shadow"
            placeholder="{{ 'templates.contact.form.phone' | t }}"
          >
        </div>

        {%- comment -%} Message {%- endcomment -%}
        <div>
          <label for="ContactForm-body" class="block text-sm font-medium text-neutral-700 mb-1.5">
            {{ 'templates.contact.form.comment' | t }}
          </label>
          <textarea
            id="ContactForm-body"
            name="contact[{{ 'templates.contact.form.comment' | t }}]"
            rows="6"
            class="w-full px-4 py-3 bg-white border border-neutral-300 rounded-lg text-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent transition-shadow resize-y"
            placeholder="{{ 'templates.contact.form.comment' | t }}"
          >{{ form.body }}</textarea>
        </div>

        {%- comment -%} Submit Button {%- endcomment -%}
        <div class="pt-2">
          <button
            type="submit"
            class="w-full sm:w-auto h-12 px-8 bg-neutral-900 text-white text-sm font-medium rounded-lg hover:bg-neutral-800 transition-colors"
          >
            {{ 'templates.contact.form.send' | t }}
          </button>
        </div>
      </div>
    {%- endform -%}
  </div>
</section>

{% schema %}
{
  "name": "t:sections.contact-form.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "default": "t:sections.contact-form.settings.title.default",
      "label": "t:sections.contact-form.settings.title.label"
    }
  ],
  "presets": [
    {
      "name": "t:sections.contact-form.presets.name"
    }
  ]
}
{% endschema %}
