{%- comment -%}
  Rich Text Section - Tailwind Version
  Simple, elegant text section with heading, caption, text, and buttons
{%- endcomment -%}

{%- liquid
  assign content_position = section.settings.desktop_content_position
  assign text_alignment = section.settings.content_alignment
-%}

<section class="py-12 lg:py-16">
  <div class="{% if section.settings.full_width %}px-4 sm:px-6 lg:px-8{% else %}max-w-4xl mx-auto px-4 sm:px-6 lg:px-8{% endif %}">
    <div class="{% if content_position == 'center' %}mx-auto max-w-3xl{% elsif content_position == 'right' %}ml-auto max-w-3xl{% else %}max-w-3xl{% endif %}
      {% if text_alignment == 'center' %}text-center{% elsif text_alignment == 'right' %}text-right{% endif %}">

      <div class="space-y-4 lg:space-y-6">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'caption' -%}
              <p
                class="text-sm font-medium uppercase tracking-wider text-neutral-500"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.caption | escape }}
              </p>

            {%- when 'heading' -%}
              <h2
                class="text-2xl lg:text-4xl font-semibold text-neutral-900"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.heading }}
              </h2>

            {%- when 'text' -%}
              <div
                class="text-neutral-600 prose prose-neutral max-w-none {% if text_alignment == 'center' %}prose-center{% endif %}"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.text }}
              </div>

            {%- when 'button' -%}
              <div
                class="flex flex-wrap gap-4 pt-2 {% if text_alignment == 'center' %}justify-center{% elsif text_alignment == 'right' %}justify-end{% endif %}"
                {{ block.shopify_attributes }}
              >
                {%- if block.settings.button_label != blank -%}
                  <a
                    {% if block.settings.button_link != blank %}
                      href="{{ block.settings.button_link }}"
                    {% else %}
                      role="link" aria-disabled="true"
                    {% endif %}
                    class="inline-flex items-center gap-2 px-6 py-3 text-sm font-medium rounded-lg transition-colors
                      {% if block.settings.button_style_secondary %}
                        bg-white text-neutral-900 border border-neutral-300 hover:bg-neutral-50
                      {% else %}
                        bg-neutral-900 text-white hover:bg-neutral-800
                      {% endif %}"
                  >
                    {{ block.settings.button_label | escape }}
                  </a>
                {%- endif -%}

                {%- if block.settings.button_label_2 != blank -%}
                  <a
                    {% if block.settings.button_link_2 != blank %}
                      href="{{ block.settings.button_link_2 }}"
                    {% else %}
                      role="link" aria-disabled="true"
                    {% endif %}
                    class="inline-flex items-center gap-2 px-6 py-3 text-sm font-medium rounded-lg transition-colors
                      {% if block.settings.button_style_secondary_2 %}
                        bg-white text-neutral-900 border border-neutral-300 hover:bg-neutral-50
                      {% else %}
                        bg-neutral-900 text-white hover:bg-neutral-800
                      {% endif %}"
                  >
                    {{ block.settings.button_label_2 | escape }}
                  </a>
                {%- endif -%}
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "t:sections.rich-text.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "select",
      "id": "desktop_content_position",
      "options": [
        {
          "value": "left",
          "label": "t:sections.rich-text.settings.desktop_content_position.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.rich-text.settings.desktop_content_position.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.rich-text.settings.desktop_content_position.options__3.label"
        }
      ],
      "default": "center",
      "label": "t:sections.rich-text.settings.desktop_content_position.label"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "options": [
        {
          "value": "left",
          "label": "t:sections.rich-text.settings.content_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.rich-text.settings.content_alignment.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.rich-text.settings.content_alignment.options__3.label"
        }
      ],
      "default": "center",
      "label": "t:sections.rich-text.settings.content_alignment.label"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "t:sections.rich-text.settings.full_width.label"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "t:sections.rich-text.blocks.heading.name",
      "limit": 3,
      "settings": [
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "t:sections.rich-text.blocks.heading.settings.heading.default",
          "label": "t:sections.rich-text.blocks.heading.settings.heading.label"
        }
      ]
    },
    {
      "type": "caption",
      "name": "t:sections.rich-text.blocks.caption.name",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "caption",
          "default": "t:sections.rich-text.blocks.caption.settings.text.default",
          "label": "t:sections.rich-text.blocks.caption.settings.text.label"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.rich-text.blocks.text.name",
      "limit": 3,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "t:sections.rich-text.blocks.text.settings.text.default",
          "label": "t:sections.rich-text.blocks.text.settings.text.label"
        }
      ]
    },
    {
      "type": "button",
      "name": "t:sections.rich-text.blocks.buttons.name",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "default": "t:sections.rich-text.blocks.buttons.settings.button_label_1.default",
          "label": "t:sections.rich-text.blocks.buttons.settings.button_label_1.label",
          "info": "t:sections.rich-text.blocks.buttons.settings.button_label_1.info"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "t:sections.rich-text.blocks.buttons.settings.button_link_1.label"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary",
          "default": false,
          "label": "t:sections.rich-text.blocks.buttons.settings.button_style_secondary_1.label"
        },
        {
          "type": "text",
          "id": "button_label_2",
          "label": "t:sections.rich-text.blocks.buttons.settings.button_label_2.label",
          "info": "t:sections.rich-text.blocks.buttons.settings.button_label_2.info"
        },
        {
          "type": "url",
          "id": "button_link_2",
          "label": "t:sections.rich-text.blocks.buttons.settings.button_link_2.label"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary_2",
          "default": false,
          "label": "t:sections.rich-text.blocks.buttons.settings.button_style_secondary_2.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.rich-text.presets.name",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "text"
        },
        {
          "type": "button"
        }
      ]
    }
  ]
}
{% endschema %}
