/* ==========================================================================
   Button System
   Variants: primary | secondary | outline | solid-secondary | tertiary (ghost)
   Sizes:    sm | md (default) | lg | icon
   ========================================================================== */

@layer components {
  /* Base Button */
  .btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    height: 2.75rem;
    padding-inline: 1.75rem;
    font-size: var(--text-xs);
    font-weight: var(--font-weight-semibold);
    line-height: 1;
    letter-spacing: var(--button-letter-spacing, 0.1em);
    white-space: nowrap;
    text-decoration: none;
    border-radius: var(--button-radius);
    box-shadow: var(--button-shadow);
    overflow: hidden;
    transition: color 0.2s, border-color 0.2s, box-shadow 0.2s, background-color 0.2s;
  }

  .btn:hover {
    box-shadow: var(--button-shadow-hover);
  }

  .btn :is(span, i, svg) {
    position: relative;
    z-index: 10;
  }

  /* ==========================================================================
     Button Variants - Using CSS custom properties for hover states
     ========================================================================== */

  /* Primary */
  .btn--primary {
    background-color: var(--color-primary);
    border: 1px solid var(--color-primary);
    color: var(--color-primary-contrast);
    --btn-hover-bg: var(--color-primary-contrast);
    --btn-hover-text: var(--color-primary);
    --btn-swipe-bg: var(--color-primary-contrast);
  }

  .btn--primary :is(span, i, svg) {
    color: var(--color-primary-contrast);
    transition: color 0.2s;
  }

  /* Secondary */
  .btn--secondary {
    background-color: transparent;
    border: 1px solid var(--color-text);
    color: var(--color-text);
    --btn-hover-bg: var(--color-text);
    --btn-hover-text: var(--color-background);
    --btn-swipe-bg: var(--color-text);
  }

  .btn--secondary :is(span, i, svg) {
    color: var(--color-text);
    transition: color 0.2s;
  }

  /* Secondary active states */
  .btn--secondary.is-active.product-card-wishlist {
    background-color: var(--color-sale);
    border-color: var(--color-sale);
    color: white;
  }
  .btn--secondary.is-active.product-card-wishlist i { color: white; }

  .btn--secondary.is-active.product-card-compare {
    background-color: var(--color-text);
    border-color: var(--color-text);
    color: var(--color-background);
  }
  .btn--secondary.is-active.product-card-compare i { color: var(--color-background); }

  /* Outline */
  .btn--outline {
    background-color: transparent;
    border: 1px solid var(--color-primary);
    color: var(--color-primary);
    --btn-hover-bg: var(--color-primary);
    --btn-hover-text: var(--color-primary-contrast);
    --btn-swipe-bg: var(--color-primary);
  }

  .btn--outline :is(span, i, svg) {
    transition: color 0.2s;
  }

  /* Solid Secondary */
  .btn--solid-secondary {
    background-color: var(--color-text);
    border: 1px solid var(--color-text);
    color: var(--color-background);
    --btn-hover-bg: var(--color-background);
    --btn-hover-text: var(--color-text);
    --btn-swipe-bg: var(--color-background);
  }

  .btn--solid-secondary :is(span, i, svg) {
    transition: color 0.2s;
  }

  /* Tertiary (Ghost) */
  .btn--tertiary {
    background-color: transparent;
    border: 1px solid transparent;
    color: var(--color-text);
    box-shadow: none;
    --btn-hover-bg: color-mix(in srgb, var(--color-text) 5%, transparent);
  }

  /* ==========================================================================
     Hover Style: Simple - Clean color transition
     ========================================================================== */

  .btn--hover-simple .btn:hover,
  .btn--hover-simple.btn:hover {
    background-color: var(--btn-hover-bg);
    color: var(--btn-hover-text);
  }

  .btn--hover-simple .btn:hover :is(span, i, svg),
  .btn--hover-simple.btn:hover :is(span, i, svg) {
    color: var(--btn-hover-text);
  }

  /* ==========================================================================
     Hover Style: Swipe - Fill animation using ::before pseudo-element
     ========================================================================== */

  /* Swipe horizontal (default) */
  .btn--hover-swipe .btn::before,
  .btn--hover-swipe.btn::before,
  .btn--hover-swipe-horizontal .btn::before,
  .btn--hover-swipe-horizontal.btn::before {
    content: '';
    position: absolute;
    z-index: 0;
    inset: 0;
    background: var(--btn-swipe-bg);
    transform: scaleX(0);
    transform-origin: right;
    transition: transform 0.3s;
  }

  .btn--hover-swipe .btn:hover::before,
  .btn--hover-swipe.btn:hover::before,
  .btn--hover-swipe-horizontal .btn:hover::before,
  .btn--hover-swipe-horizontal.btn:hover::before {
    transform: scaleX(1);
    transform-origin: left;
  }

  /* Swipe vertical */
  .btn--hover-swipe-vertical .btn::before,
  .btn--hover-swipe-vertical.btn::before {
    content: '';
    position: absolute;
    z-index: 0;
    inset: 0;
    background: var(--btn-swipe-bg);
    transform: scaleY(0);
    transform-origin: bottom;
    transition: transform 0.3s;
  }

  .btn--hover-swipe-vertical .btn:hover::before,
  .btn--hover-swipe-vertical.btn:hover::before {
    transform: scaleY(1);
    transform-origin: top;
  }

  /* Swipe hover text colors (applies to all swipe variants) */
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical) .btn :is(span, i, svg),
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical).btn :is(span, i, svg) {
    transition: color 0.2s 0.1s;
  }

  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical) .btn:hover,
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical).btn:hover {
    color: var(--btn-hover-text);
  }

  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical) .btn:hover :is(span, i, svg),
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical).btn:hover :is(span, i, svg) {
    color: var(--btn-hover-text);
  }

  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical) .btn:not(:hover) :is(span, i, svg),
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical).btn:not(:hover) :is(span, i, svg) {
    transition-delay: 0s;
  }

  /* Tertiary swipe special case */
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical) .btn--tertiary::before,
  :is(.btn--hover-swipe, .btn--hover-swipe-horizontal, .btn--hover-swipe-vertical).btn--tertiary::before {
    background: var(--color-text);
    opacity: 0.05;
  }

  /* ==========================================================================
     Hover Style: Shine - Diagonal light sweep effect
     ========================================================================== */

  .btn--hover-shine .btn::before,
  .btn--hover-shine.btn::before {
    content: '';
    position: absolute;
    z-index: 0;
    inset: 0;
    background: linear-gradient(120deg, transparent 0%, transparent 40%, rgba(255, 255, 255, 0.4) 50%, transparent 60%, transparent 100%);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
  }

  .btn--hover-shine .btn:hover::before,
  .btn--hover-shine.btn:hover::before {
    transform: translateX(100%);
  }

  .btn--hover-shine .btn :is(span, i, svg),
  .btn--hover-shine.btn :is(span, i, svg) {
    transition: color 0.3s;
  }

  .btn--hover-shine .btn:hover,
  .btn--hover-shine.btn:hover {
    background-color: var(--btn-hover-bg);
    color: var(--btn-hover-text);
  }

  .btn--hover-shine .btn:hover :is(span, i, svg),
  .btn--hover-shine.btn:hover :is(span, i, svg) {
    color: var(--btn-hover-text);
  }

  /* Primary shine border fix */
  .btn--hover-shine .btn--primary:hover,
  .btn--hover-shine.btn--primary:hover {
    border-color: var(--color-primary);
  }

  /* ==========================================================================
     Slide Text Effect - Text slides up on hover
     Enabled via body class: .btn-text-slide
     ========================================================================== */

  .btn-text-slide .btn span[data-hover],
  .btn-text-slide.btn span[data-hover] {
    display: inline-block;
    position: relative;
    overflow: hidden;
  }

  .btn-text-slide .btn span[data-hover]::after,
  .btn-text-slide.btn span[data-hover]::after {
    content: attr(data-hover);
    position: absolute;
    left: 0;
    top: 100%;
    white-space: nowrap;
    transition: transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);
  }

  .btn-text-slide .btn span[data-hover] > span,
  .btn-text-slide.btn span[data-hover] > span {
    display: inline-block;
    transition: transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);
  }

  .btn-text-slide .btn:hover span[data-hover]::after,
  .btn-text-slide.btn:hover span[data-hover]::after,
  .btn-text-slide .btn:hover span[data-hover] > span,
  .btn-text-slide.btn:hover span[data-hover] > span {
    transform: translateY(-100%);
  }

  /* ==========================================================================
     Button Sizes
     ========================================================================== */

  .btn--xs { height: 2rem; padding-inline: 1rem; font-size: var(--text-xs); }
  .btn--sm { height: 2.5rem; padding-inline: 1.25rem; font-size: var(--text-xs); }
  .btn--md { height: 2.75rem; }
  .btn--lg { height: 3.5rem; padding-inline: 2.25rem; font-size: var(--text-sm); }
  .btn--icon { aspect-ratio: 1; padding: 0.75rem; }
  .btn--icon.btn--sm { padding: 0.5rem; }
  .btn--icon.btn--lg { padding: 1rem; }

  /* Layout */
  .btn--full { width: 100%; }
  .btn--rounded { border-radius: 9999px; }

  /* ==========================================================================
     Button States
     ========================================================================== */

  .btn:disabled,
  .btn[disabled],
  .btn.is-disabled {
    cursor: not-allowed;
    pointer-events: none;
    opacity: 0.5;
  }

  .btn.is-loading {
    pointer-events: none;
    color: transparent !important;
  }

  .btn.is-loading::after {
    content: '';
    position: absolute;
    z-index: 20;
    width: 1rem;
    height: 1rem;
    border: 2px solid currentColor;
    border-right-color: transparent;
    border-radius: 9999px;
    animation: spin 1s linear infinite;
  }

  .btn--primary.is-loading::after {
    border-color: var(--color-primary-contrast);
    border-right-color: transparent;
  }

  .btn--secondary.is-loading::after,
  .btn--tertiary.is-loading::after {
    border-color: var(--color-text);
    border-right-color: transparent;
  }

  .btn--outline.is-loading::after {
    border-color: var(--color-primary);
    border-right-color: transparent;
  }

  /* Section Variant */
  .btn--section {
    color: var(--section-text, var(--color-text));
    border-color: color-mix(in srgb, var(--section-text, var(--color-text)) 30%, transparent);
  }

  .btn--section::before { background: var(--section-text, var(--color-text)); }

  .btn--section:hover {
    color: var(--section-bg, var(--color-background));
    border-color: var(--section-text, var(--color-text));
  }

  .btn--section:hover :is(span, i, svg) {
    color: var(--section-bg, var(--color-background));
  }

  /* ==========================================================================
     Share Button - Social share icons
     ========================================================================== */

  .share-btn {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--color-border);
    border-radius: var(--button-radius);
    color: var(--color-text);
    transition: all var(--transition-base);
  }

  .share-btn:hover {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-primary-contrast);
  }

  /* ==========================================================================
     Link CTA - Text links with arrow and slide-up hover effect
     ========================================================================== */

  .link-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    font-size: var(--text-sm);
    font-weight: var(--font-weight-semibold);
    letter-spacing: var(--button-letter-spacing, 0.1em);
  }

  .link-cta-text {
    display: inline-block;
    overflow: hidden;
  }

  .link-cta-text span[data-hover] {
    display: inline-block;
    position: relative;
    transition: transform 0.2s;
  }

  .link-cta-text span[data-hover]::after {
    content: attr(data-hover);
    position: absolute;
    left: 0;
    top: 100%;
    white-space: nowrap;
  }

  .link-cta:hover .link-cta-text span[data-hover] {
    transform: translateY(-100%);
  }

  /* ==========================================================================
     Arrow Link - Small navigation links with icon
     ========================================================================== */

  .arrow-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: var(--text-xs);
    font-weight: var(--font-weight-semibold);
    letter-spacing: var(--button-letter-spacing, 0.1em);
    color: var(--color-text-secondary);
    overflow: hidden;
  }

  .arrow-link span[data-hover] {
    display: inline-block;
    position: relative;
    transition: transform 0.2s;
  }

  .arrow-link span[data-hover]::after {
    content: attr(data-hover);
    position: absolute;
    left: 0;
    top: 100%;
  }

  .arrow-link:hover span[data-hover],
  .group:hover .arrow-link span[data-hover] {
    transform: translateY(-100%);
  }

  .arrow-link--uppercase { text-transform: uppercase; }

  /* Text Hover Reveal */
  .text-hover-reveal { overflow: hidden; }

  .text-hover-reveal span {
    display: inline-block;
    position: relative;
    transition: transform 0.2s;
  }

  .text-hover-reveal span::after {
    content: attr(data-hover);
    position: absolute;
    left: 0;
    top: 100%;
  }

  .text-hover-reveal:hover span { transform: translateY(-100%); }

  /* ==========================================================================
     Card Action Button - Product card icon buttons
     ========================================================================== */

  .card-action-btn {
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px;
    background-color: var(--color-background);
    color: var(--color-text);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    transform: scale(0.9);
    transition: all 0.3s;
  }

  .card-action-btn:hover {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  .card-action-btn:focus-visible {
    transform: scale(1);
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  .group:hover .card-action-btn { transform: scale(1); }

  .card-action-btn[data-wishlist-toggle].is-active {
    background-color: var(--color-sale);
    color: white;
  }

  .card-action-btn[data-compare-toggle].is-active {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  /* ==========================================================================
     Drawer Close Button
     ========================================================================== */

  .drawer-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    margin: -0.5rem;
    margin-left: auto;
    background: transparent;
    border: none;
    color: var(--color-text);
    transition: opacity var(--transition-fast);
  }

  .drawer-close:hover { opacity: 0.6; }

  .drawer-close:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  .drawer-close--lg {
    width: 3rem;
    height: 3rem;
    margin: -0.75rem;
  }

  /* ==========================================================================
     Modal Close Button
     ========================================================================== */

  .modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    z-index: 10;
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px;
    background-color: var(--color-text);
    color: var(--color-background);
    transition: transform 0.2s;
  }

  .modal-close:hover { opacity: 0.8; }

  .modal-close:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* ==========================================================================
     Drawer Backdrop
     ========================================================================== */

  .drawer-backdrop {
    position: fixed;
    inset: 0;
    opacity: 0;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    transition: opacity 0.3s;
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 56 56'%3E%3Ccircle cx='28' cy='28' r='28' fill='white'/%3E%3Cline x1='20' y1='20' x2='36' y2='36' stroke='black' stroke-width='1.5' stroke-linecap='round'/%3E%3Cline x1='36' y1='20' x2='20' y2='36' stroke='black' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E") 28 28, pointer;
  }

  .group.is-open .drawer-backdrop,
  .group[class*='is-open'] .drawer-backdrop {
    opacity: 1;
  }

  /* ==========================================================================
     Remove Item Button
     ========================================================================== */

  .remove-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    background: transparent;
    border: none;
    color: var(--color-text-secondary);
    transition: color var(--transition-fast);
  }

  .remove-btn:hover { color: var(--color-sale); }

  .remove-btn:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* ==========================================================================
     Slider Navigation Button
     ========================================================================== */

  .slider-nav {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .slider-nav.is-hidden { display: none; }

  .slider-nav-btn {
    width: 2.75rem;
    height: 2.75rem;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px;
    background: transparent;
    border: 1px solid var(--color-text);
    color: var(--color-text);
    cursor: pointer;
    transition: all 0.3s;
  }

  .slider-nav-btn:hover:not(:disabled) {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  .slider-nav-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
}
